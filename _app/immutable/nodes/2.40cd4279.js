import{S as ie,i as oe,a7 as tt,a8 as Te,a9 as Pe,m as b,h as m,n as v,b as $,D as u,W as ye,s as pe,e as Ae,g as R,v as st,d as W,f as nt,U as G,V as _e,k as C,y as J,a as A,q as H,l as E,z as Q,c as N,r as B,p as x,A as ee,E as K,Y as at,Z as Ne,B as te,P as we,u as Z,a5 as Y,aa as Me,ab as rt,C as je,ac as se,ad as U,F as He,G as Be,H as Fe,t as Ce,L as Qe,w as ve,a2 as lt,a4 as it,X as ot,R as ct,o as ft}from"../chunks/index.b40dfd29.js";import{r as q,c as $e,s as Se,i as dt,m as ut,d as ne,e as ht,g as pt,h as gt,j as ge,k as Ee,b as mt,l as vt}from"../chunks/store.780dcd20.js";import{w as _t}from"../chunks/index.41ce6c87.js";function wt(s){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Pe(n,"svg",{viewBox:!0,fill:!0,width:!0,height:!0,stroke:!0});var a=b(e);t=Pe(a,"path",{d:!0}),b(t).forEach(m),a.forEach(m),this.h()},h(){v(t,"d",s[0]),v(e,"viewBox","0 0 "+Oe+" "+Oe),v(e,"fill","currentColor"),v(e,"width","100%"),v(e,"height","100%"),v(e,"stroke","none")},m(n,a){$(n,e,a),u(e,t)},p(n,[a]){a&1&&v(t,"d",n[0])},i:ye,o:ye,d(n){n&&m(e)}}}const Oe=24;function bt(s,e,t){let{d:n}=e;return s.$$set=a=>{"d"in a&&t(0,n=a.d)},[n]}class he extends ie{constructor(e){super(),oe(this,e,bt,wt,tt,{d:0})}}var Ct="M12 3C6.5 3 2 6.58 2 11C2.05 13.15 3.06 15.17 4.75 16.5C4.75 17.1 4.33 18.67 2 21C4.37 20.89 6.64 20 8.47 18.5C9.61 18.83 10.81 19 12 19C17.5 19 22 15.42 22 11S17.5 3 12 3M12 17C7.58 17 4 14.31 4 11S7.58 5 12 5 20 7.69 20 11 16.42 17 12 17M11 13V15H13V13H11M11 11H13V7H11V11Z",Et="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M12 20C7.59 20 4 16.41 4 12S7.59 4 12 4 20 7.59 20 12 16.41 20 12 20M16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z",yt="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",kt="M12,14A2,2 0 0,1 14,16A2,2 0 0,1 12,18A2,2 0 0,1 10,16A2,2 0 0,1 12,14M23.46,8.86L21.87,15.75L15,14.16L18.8,11.78C17.39,9.5 14.87,8 12,8C8.05,8 4.77,10.86 4.12,14.63L2.15,14.28C2.96,9.58 7.06,6 12,6C15.58,6 18.73,7.89 20.5,10.72L23.46,8.86Z",St="M16,18H18V6H16M6,18L14.5,12L6,6V18Z";function xe(s){let e,t,n,a,r,o,f,d,l,i,p,k,D,_,y,g,c,w,I,T,S,h,L,V,O;return a=new he({props:{d:Ct}}),p=new he({props:{d:kt}}),w=new he({props:{d:Et}}),{c(){e=C("div"),t=C("button"),n=C("span"),J(a.$$.fragment),r=A(),o=C("span"),f=H("WRONG"),d=A(),l=C("button"),i=C("span"),J(p.$$.fragment),k=A(),D=C("span"),_=H("SKIP"),y=A(),g=C("button"),c=C("span"),J(w.$$.fragment),I=A(),T=C("span"),S=H("FINE"),this.h()},l(M){e=E(M,"DIV",{class:!0,style:!0});var F=b(e);t=E(F,"BUTTON",{type:!0,class:!0});var P=b(t);n=E(P,"SPAN",{class:!0});var j=b(n);Q(a.$$.fragment,j),j.forEach(m),r=N(P),o=E(P,"SPAN",{class:!0});var X=b(o);f=B(X,"WRONG"),X.forEach(m),P.forEach(m),d=N(F),l=E(F,"BUTTON",{type:!0,class:!0});var z=b(l);i=E(z,"SPAN",{class:!0});var ce=b(i);Q(p.$$.fragment,ce),ce.forEach(m),k=N(z),D=E(z,"SPAN",{class:!0});var le=b(D);_=B(le,"SKIP"),le.forEach(m),z.forEach(m),y=N(F),g=E(F,"BUTTON",{type:!0,class:!0});var ae=b(g);c=E(ae,"SPAN",{class:!0});var fe=b(c);Q(w.$$.fragment,fe),fe.forEach(m),I=N(ae),T=E(ae,"SPAN",{class:!0});var re=b(T);S=B(re,"FINE"),re.forEach(m),ae.forEach(m),F.forEach(m),this.h()},h(){v(n,"class","w-10"),v(o,"class",""),v(t,"type","button"),v(t,"class","bg-error-500 w-1/3 items-center justify-items-center justify-center p-2 active:!text-error-700 active:bg-white flex flex-col"),v(i,"class","w-10"),v(D,"class",""),v(l,"type","button"),v(l,"class","bg-secondary-500 w-1/3 items-center justify-items-center justify-center p-2 active:!text-secondary-700 active:bg-white flex flex-col"),v(c,"class","w-10"),v(T,"class",""),v(g,"type","button"),v(g,"class","bg-success-600 w-1/3 items-center justify-items-center justify-center p-2 active:!text-success-700 active:bg-white flex flex-col"),v(e,"class","bg-white font-semibold text-white w-full flex min-h-[6em]"),x(e,"box-shadow","0 -2px 8px #777")},m(M,F){$(M,e,F),u(e,t),u(t,n),ee(a,n,null),u(t,r),u(t,o),u(o,f),u(e,d),u(e,l),u(l,i),ee(p,i,null),u(l,k),u(l,D),u(D,_),u(e,y),u(e,g),u(g,c),ee(w,c,null),u(g,I),u(g,T),u(T,S),L=!0,V||(O=[K(t,"click",s[1]),K(l,"click",s[2]),K(g,"click",s[3])],V=!0)},p:ye,i(M){L||(R(a.$$.fragment,M),R(p.$$.fragment,M),R(w.$$.fragment,M),at(()=>{L&&(h||(h=Ne(e,$e,{},!0)),h.run(1))}),L=!0)},o(M){W(a.$$.fragment,M),W(p.$$.fragment,M),W(w.$$.fragment,M),h||(h=Ne(e,$e,{},!1)),h.run(0),L=!1},d(M){M&&m(e),te(a),te(p),te(w),M&&h&&h.end(),V=!1,we(O)}}}function It(s){let e,t,n=s[0].hasStarted&&xe(s);return{c(){n&&n.c(),e=Ae()},l(a){n&&n.l(a),e=Ae()},m(a,r){n&&n.m(a,r),$(a,e,r),t=!0},p(a,[r]){a[0].hasStarted?n?(n.p(a,r),r&1&&R(n,1)):(n=xe(a),n.c(),R(n,1),n.m(e.parentNode,e)):n&&(st(),W(n,1,1,()=>{n=null}),nt())},i(a){t||(R(n),t=!0)},o(a){W(n),t=!1},d(a){n&&n.d(a),a&&m(e)}}}function Dt(s,e,t){let n;G(s,q,d=>t(0,n=d));const a=_e();function r(){a("answerWrong",{})}function o(){a("answerSkipped",{})}function f(){a("answerFine",{})}return[n,r,o,f]}class Vt extends ie{constructor(e){super(),oe(this,e,Dt,It,pe,{})}}function Lt(s){let e,t,n,a,r,o=(s[1].hasStarted?s[1].pointsEarned:s[2])+"",f,d,l,i,p,k,D,_,y,g,c,w,I,T,S,h,L,V,O,M,F;return w=new he({props:{d:St}}),V=new he({props:{d:yt}}),{c(){e=C("div"),t=C("div"),n=C("span"),a=H("Points"),r=C("span"),f=H(o),d=A(),l=C("div"),i=C("span"),p=H("Time"),k=C("span"),D=H(s[0]),_=A(),y=C("div"),g=C("button"),c=C("span"),J(w.$$.fragment),I=C("span"),T=H("Next"),S=A(),h=C("button"),L=C("span"),J(V.$$.fragment),this.h()},l(P){e=E(P,"DIV",{class:!0});var j=b(e);t=E(j,"DIV",{class:!0});var X=b(t);n=E(X,"SPAN",{});var z=b(n);a=B(z,"Points"),z.forEach(m),r=E(X,"SPAN",{class:!0});var ce=b(r);f=B(ce,o),ce.forEach(m),X.forEach(m),d=N(j),l=E(j,"DIV",{class:!0});var le=b(l);i=E(le,"SPAN",{});var ae=b(i);p=B(ae,"Time"),ae.forEach(m),k=E(le,"SPAN",{class:!0});var fe=b(k);D=B(fe,s[0]),fe.forEach(m),le.forEach(m),_=N(j),y=E(j,"DIV",{class:!0});var re=b(y);g=E(re,"BUTTON",{class:!0});var be=b(g);c=E(be,"SPAN",{class:!0});var Ie=b(c);Q(w.$$.fragment,Ie),Ie.forEach(m),I=E(be,"SPAN",{});var De=b(I);T=B(De,"Next"),De.forEach(m),be.forEach(m),S=N(re),h=E(re,"BUTTON",{class:!0});var Ve=b(h);L=E(Ve,"SPAN",{class:!0});var Le=b(L);Q(V.$$.fragment,Le),Le.forEach(m),Ve.forEach(m),re.forEach(m),j.forEach(m),this.h()},h(){v(r,"class","text-2xl tabular-nums"),v(t,"class","points p-2 flex justify-items-center items-center space-x-1"),v(k,"class","text-2xl tabular-nums"),v(l,"class","timer p-2 points flex justify-items-center items-center space-x-1"),v(c,"class","w-5"),v(g,"class","btn variant-ghost-primary"),v(L,"class","w-5"),v(h,"class","btn variant-ghost-secondary h-full"),v(y,"class","p-2 flex flex-nowrap space-x-1"),v(e,"class","bg-white rounded-none font-semibold w-full shadow-lg flex justify-between")},m(P,j){$(P,e,j),u(e,t),u(t,n),u(n,a),u(t,r),u(r,f),u(e,d),u(e,l),u(l,i),u(i,p),u(l,k),u(k,D),u(e,_),u(e,y),u(y,g),u(g,c),ee(w,c,null),u(g,I),u(I,T),u(y,S),u(y,h),u(h,L),ee(V,L,null),O=!0,M||(F=[K(g,"click",s[3]),K(h,"click",s[4])],M=!0)},p(P,[j]){(!O||j&6)&&o!==(o=(P[1].hasStarted?P[1].pointsEarned:P[2])+"")&&Z(f,o),(!O||j&1)&&Z(D,P[0])},i(P){O||(R(w.$$.fragment,P),R(V.$$.fragment,P),O=!0)},o(P){W(w.$$.fragment,P),W(V.$$.fragment,P),O=!1},d(P){P&&m(e),te(w),te(V),M=!1,we(F)}}}function Tt(s,e,t){let n,a;G(s,q,p=>t(1,n=p)),G(s,Se,p=>t(6,a=p));const r=_e();let o=0,f=new Date("2999-12-12"),d=0;function l(){t(2,d=n.pointsEarned),Y(q,n=dt(a),n),t(5,f=new Date)}function i(){const p={type:"component",component:"settingsModal"};ut.trigger(p)}return setInterval(()=>{t(5,f=new Date)},200),s.$$.update=()=>{s.$$.dirty&35&&(n.hasStarted?t(0,o=Math.min(n.totalSeconds,Math.max(n.totalSeconds-Math.floor((f.getTime()-n.startTime.getTime())/1e3),0))):t(0,o=n.totalSeconds),o<=0&&(r("timeOut",{}),l()))},[o,n,d,l,i,f]}class Pt extends ie{constructor(e){super(),oe(this,e,Tt,Lt,pe,{})}}const At=300,et="none";function de(s,e,t){return s.addEventListener(e,t),()=>s.removeEventListener(e,t)}function Nt(s,e){return e.filter(t=>s.pointerId!==t.pointerId)}function me(s,e,t,n,a){s.dispatchEvent(new CustomEvent(`${e}${a}`,{detail:{event:t,pointersCount:n.length,target:t.target}}))}function Mt(s,e,t,n,a,r=et){e.style.touchAction=r;let o=[];function f(l){o.push(l),me(e,s,l,o,"down"),n==null||n(o,l);const i=l.pointerId;function p(c){i===c.pointerId&&(o=Nt(c,o),o.length||k(),me(e,s,c,o,"up"),a==null||a(o,c))}function k(){D(),_(),y(),g()}const D=de(e,"pointermove",c=>{o=o.map(w=>c.pointerId===w.pointerId?c:w),me(e,s,c,o,"move"),t==null||t(o,c)}),_=de(e,"lostpointercapture",c=>{p(c)}),y=de(e,"pointerup",c=>{p(c)}),g=de(e,"pointerleave",c=>{o=[],k(),me(e,s,c,o,"up"),a==null||a(o,c)})}const d=de(e,"pointerdown",f);return{destroy:()=>{d()}}}function jt(s,e){let t={delay:At,composed:!1,touchAction:et,...e};const n="pan";let a,r;function o(d,l){a=Date.now(),r=l.target}function f(d,l){if(d.length===1&&Date.now()-a>t.delay){const i=s.getBoundingClientRect(),p=Math.round(l.clientX-i.left),k=Math.round(l.clientY-i.top);p>=0&&k>=0&&p<=i.width&&k<=i.height&&s.dispatchEvent(new CustomEvent(n,{detail:{x:p,y:k,target:r}}))}return!1}return t.composed?{onMove:f,onDown:o,onUp:null}:{...Mt(n,s,f,o,null,t.touchAction),update:d=>{t={...t,...d}}}}function Ue(s){return Object.prototype.toString.call(s)==="[object Date]"}function ke(s,e,t,n){if(typeof t=="number"||Ue(t)){const a=n-t,r=(t-e)/(s.dt||1/60),o=s.opts.stiffness*a,f=s.opts.damping*r,d=(o-f)*s.inv_mass,l=(r+d)*s.dt;return Math.abs(l)<s.opts.precision&&Math.abs(a)<s.opts.precision?n:(s.settled=!1,Ue(t)?new Date(t.getTime()+l):t+l)}else{if(Array.isArray(t))return t.map((a,r)=>ke(s,e[r],t[r],n[r]));if(typeof t=="object"){const a={};for(const r in t)a[r]=ke(s,e[r],t[r],n[r]);return a}else throw new Error(`Cannot spring ${typeof t} values`)}}function Ht(s,e={}){const t=_t(s),{stiffness:n=.15,damping:a=.8,precision:r=.01}=e;let o,f,d,l=s,i=s,p=1,k=0,D=!1;function _(g,c={}){i=g;const w=d={};return s==null||c.hard||y.stiffness>=1&&y.damping>=1?(D=!0,o=Me(),l=g,t.set(s=i),Promise.resolve()):(c.soft&&(k=1/((c.soft===!0?.5:+c.soft)*60),p=0),f||(o=Me(),D=!1,f=rt(I=>{if(D)return D=!1,f=null,!1;p=Math.min(p+k,1);const T={inv_mass:p,opts:y,settled:!0,dt:(I-o)*60/1e3},S=ke(T,l,s,i);return o=I,l=s,t.set(s=S),T.settled&&(f=null),!T.settled})),new Promise(I=>{f.promise.then(()=>{w===d&&I()})}))}const y={set:_,update:(g,c)=>_(g(i,s),c),subscribe:t.subscribe,stiffness:n,damping:a,precision:r};return y}const Bt=s=>({}),Re=s=>({}),Ft=s=>({}),We=s=>({});function $t(s){let e,t,n,a,r,o,f,d,l,i,p,k;const D=s[10].front,_=je(D,s,s[9],We),y=s[10].back,g=je(y,s,s[9],Re);return{c(){e=C("div"),t=C("div"),n=C("div"),_&&_.c(),r=A(),o=C("div"),g&&g.c(),this.h()},l(c){e=E(c,"DIV",{class:!0});var w=b(e);t=E(w,"DIV",{class:!0});var I=b(t);n=E(I,"DIV",{class:!0});var T=b(n);_&&_.l(T),T.forEach(m),r=N(I),o=E(I,"DIV",{class:!0});var S=b(o);g&&g.l(S),S.forEach(m),I.forEach(m),w.forEach(m),this.h()},h(){v(n,"class",a=se(ne(s[3],"front-card  w-full h-fit backface-invisible"))+" svelte-4l962r"),v(o,"class",f=se(ne(s[4],"back-card absolute inset-0 backface-invisible"))+" svelte-4l962r"),v(t,"class",d=se(ne(s[2],"container-card-inner relative w-full h-max transform"))+" svelte-4l962r"),U(t,"enableTransition",s[5]),U(t,"flipped",!s[0]),v(e,"class",l=se(ne(s[1],"container-card drop-shadow-md"))+" svelte-4l962r")},m(c,w){$(c,e,w),u(e,t),u(t,n),_&&_.m(n,null),u(t,r),u(t,o),g&&g.m(o,null),i=!0,p||(k=[K(t,"pointerdown",s[6]),K(e,"click",s[11])],p=!0)},p(c,[w]){_&&_.p&&(!i||w&512)&&He(_,D,c,c[9],i?Fe(D,c[9],w,Ft):Be(c[9]),We),(!i||w&8&&a!==(a=se(ne(c[3],"front-card  w-full h-fit backface-invisible"))+" svelte-4l962r"))&&v(n,"class",a),g&&g.p&&(!i||w&512)&&He(g,y,c,c[9],i?Fe(y,c[9],w,Bt):Be(c[9]),Re),(!i||w&16&&f!==(f=se(ne(c[4],"back-card absolute inset-0 backface-invisible"))+" svelte-4l962r"))&&v(o,"class",f),(!i||w&4&&d!==(d=se(ne(c[2],"container-card-inner relative w-full h-max transform"))+" svelte-4l962r"))&&v(t,"class",d),(!i||w&36)&&U(t,"enableTransition",c[5]),(!i||w&5)&&U(t,"flipped",!c[0]),(!i||w&2&&l!==(l=se(ne(c[1],"container-card drop-shadow-md"))+" svelte-4l962r"))&&v(e,"class",l)},i(c){i||(R(_,c),R(g,c),i=!0)},o(c){W(_,c),W(g,c),i=!1},d(c){c&&m(e),_&&_.d(c),g&&g.d(c),p=!1,we(k)}}}function Ot(s,e,t){let{$$slots:n={},$$scope:a}=e,{containerCardClass:r=""}=e,{containerCardInnerClass:o=""}=e,{frontCardClass:f=""}=e,{backCardClass:d=""}=e,{isUp:l=!1}=e;const i=_e();let p=!0;async function k(){return new Promise(async(g,c)=>{t(5,p=!1),await Ce(),t(0,l=!1),await Ce(),setTimeout(()=>{t(5,p=!0),t(0,l=!0),g()},10)})}async function D(){return new Promise(async(g,c)=>{l&&(t(0,l=!1),await Ce())})}function _(g){i("tapCard",{type:l?"front":"back"})}function y(g){Qe.call(this,s,g)}return s.$$set=g=>{"containerCardClass"in g&&t(1,r=g.containerCardClass),"containerCardInnerClass"in g&&t(2,o=g.containerCardInnerClass),"frontCardClass"in g&&t(3,f=g.frontCardClass),"backCardClass"in g&&t(4,d=g.backCardClass),"isUp"in g&&t(0,l=g.isUp),"$$scope"in g&&t(9,a=g.$$scope)},[l,r,o,f,d,p,_,k,D,a,n,y]}class xt extends ie{constructor(e){super(),oe(this,e,Ot,$t,pe,{containerCardClass:1,containerCardInnerClass:2,frontCardClass:3,backCardClass:4,isUp:0,flipFromBack:7,flipToBack:8})}get flipFromBack(){return this.$$.ctx[7]}get flipToBack(){return this.$$.ctx[8]}}function Ze(s,e,t){const n=s.slice();return n[19]=e[t],n[21]=t,n}function ze(s){let e,t=s[0].target.german+"",n;return{c(){e=C("div"),n=H(t),this.h()},l(a){e=E(a,"DIV",{class:!0});var r=b(e);n=B(r,t),r.forEach(m),this.h()},h(){v(e,"class","font-medium text-center text-xl")},m(a,r){$(a,e,r),u(e,n)},p(a,r){r&1&&t!==(t=a[0].target.german+"")&&Z(n,t)},d(a){a&&m(e)}}}function Ye(s){let e,t=s[0].target.english+"",n;return{c(){e=C("div"),n=H(t),this.h()},l(a){e=E(a,"DIV",{class:!0});var r=b(e);n=B(r,t),r.forEach(m),this.h()},h(){v(e,"class","font-medium text-center text-xl")},m(a,r){$(a,e,r),u(e,n)},p(a,r){r&1&&t!==(t=a[0].target.english+"")&&Z(n,t)},d(a){a&&m(e)}}}function qe(s){let e,t,n=s[0].target.chinese+"",a,r,o,f=s[0].target.pinyin+"",d;return{c(){e=C("div"),t=C("div"),a=H(n),r=A(),o=C("div"),d=H(f),this.h()},l(l){e=E(l,"DIV",{});var i=b(e);t=E(i,"DIV",{class:!0});var p=b(t);a=B(p,n),p.forEach(m),r=N(i),o=E(i,"DIV",{class:!0});var k=b(o);d=B(k,f),k.forEach(m),i.forEach(m),this.h()},h(){v(t,"class","text-center text-2xl"),v(o,"class","-mt-1 text-center text-sm")},m(l,i){$(l,e,i),u(e,t),u(t,a),u(e,r),u(e,o),u(o,d)},p(l,i){i&1&&n!==(n=l[0].target.chinese+"")&&Z(a,n),i&1&&f!==(f=l[0].target.pinyin+"")&&Z(d,f)},d(l){l&&m(e)}}}function Ge(s){let e,t=s[19].german+"",n;return{c(){e=C("div"),n=H(t),this.h()},l(a){e=E(a,"DIV",{class:!0});var r=b(e);n=B(r,t),r.forEach(m),this.h()},h(){v(e,"class","text-center text-md")},m(a,r){$(a,e,r),u(e,n)},p(a,r){r&1&&t!==(t=a[19].german+"")&&Z(n,t)},d(a){a&&m(e)}}}function Ke(s){let e,t=s[19].english+"",n;return{c(){e=C("div"),n=H(t),this.h()},l(a){e=E(a,"DIV",{class:!0});var r=b(e);n=B(r,t),r.forEach(m),this.h()},h(){v(e,"class","text-center text-md")},m(a,r){$(a,e,r),u(e,n)},p(a,r){r&1&&t!==(t=a[19].english+"")&&Z(n,t)},d(a){a&&m(e)}}}function Xe(s){let e,t,n=s[19].chinese+"",a,r,o,f=s[19].pinyin+"",d;return{c(){e=C("div"),t=C("div"),a=H(n),r=A(),o=C("div"),d=H(f),this.h()},l(l){e=E(l,"DIV",{class:!0});var i=b(e);t=E(i,"DIV",{class:!0});var p=b(t);a=B(p,n),p.forEach(m),r=N(i),o=E(i,"DIV",{class:!0});var k=b(o);d=B(k,f),k.forEach(m),i.forEach(m),this.h()},h(){v(t,"class","text-center text-xl"),v(o,"class","-mt-1 text-center text-xs"),v(e,"class","w-full")},m(l,i){$(l,e,i),u(e,t),u(t,a),u(e,r),u(e,o),u(o,d)},p(l,i){i&1&&n!==(n=l[19].chinese+"")&&Z(a,n),i&1&&f!==(f=l[19].pinyin+"")&&Z(d,f)},d(l){l&&m(e)}}}function Je(s){let e,t,n,a,r,o=s[5].languages.german&&Ge(s),f=s[5].languages.english&&Ke(s),d=s[5].languages.chinese&&Xe(s);return{c(){e=C("div"),t=C("div"),o&&o.c(),n=A(),f&&f.c(),a=A(),d&&d.c(),r=A(),this.h()},l(l){e=E(l,"DIV",{class:!0});var i=b(e);t=E(i,"DIV",{class:!0});var p=b(t);o&&o.l(p),n=N(p),f&&f.l(p),p.forEach(m),a=N(i),d&&d.l(i),r=N(i),i.forEach(m),this.h()},h(){v(t,"class","flex flex-col items-center justify-center"),U(t,"w-full",s[5].languages.german||s[5].languages.english),v(e,"class","flex align-middle justify-center p-1 min-h-[3em]"),x(e,"background-color",s[0].categoryColor+(s[21]%2==0?"22":"44")),x(e,"border-color",s[0].categoryColor)},m(l,i){$(l,e,i),u(e,t),o&&o.m(t,null),u(t,n),f&&f.m(t,null),u(e,a),d&&d.m(e,null),u(e,r)},p(l,i){l[5].languages.german?o?o.p(l,i):(o=Ge(l),o.c(),o.m(t,n)):o&&(o.d(1),o=null),l[5].languages.english?f?f.p(l,i):(f=Ke(l),f.c(),f.m(t,null)):f&&(f.d(1),f=null),i&32&&U(t,"w-full",l[5].languages.german||l[5].languages.english),l[5].languages.chinese?d?d.p(l,i):(d=Xe(l),d.c(),d.m(e,r)):d&&(d.d(1),d=null),i&1&&x(e,"background-color",l[0].categoryColor+(l[21]%2==0?"22":"44")),i&1&&x(e,"border-color",l[0].categoryColor)},d(l){l&&m(e),o&&o.d(),f&&f.d(),d&&d.d()}}}function Ut(s){let e,t,n,a,r=s[0].category+"",o,f,d,l,i,p,k,D,_,y,g,c=s[5].languages.german&&ze(s),w=s[5].languages.english&&Ye(s),I=s[5].languages.chinese&&qe(s),T=s[0].forbidden,S=[];for(let h=0;h<T.length;h+=1)S[h]=Je(Ze(s,T,h));return{c(){e=C("div"),t=C("div"),n=C("div"),a=C("div"),o=H(r),f=A(),d=C("div"),l=C("div"),i=C("div"),c&&c.c(),p=A(),w&&w.c(),k=A(),I&&I.c(),D=A(),_=C("div");for(let h=0;h<S.length;h+=1)S[h].c();this.h()},l(h){e=E(h,"DIV",{slot:!0,class:!0});var L=b(e);t=E(L,"DIV",{class:!0});var V=b(t);n=E(V,"DIV",{class:!0});var O=b(n);a=E(O,"DIV",{class:!0});var M=b(a);o=B(M,r),M.forEach(m),O.forEach(m),f=N(V),d=E(V,"DIV",{class:!0});var F=b(d);l=E(F,"DIV",{class:!0});var P=b(l);i=E(P,"DIV",{});var j=b(i);c&&c.l(j),p=N(j),w&&w.l(j),j.forEach(m),k=N(P),I&&I.l(P),P.forEach(m),D=N(F),_=E(F,"DIV",{class:!0});var X=b(_);for(let z=0;z<S.length;z+=1)S[z].l(X);X.forEach(m),F.forEach(m),V.forEach(m),L.forEach(m),this.h()},h(){v(a,"class","rounded-full font-medium text-white text-sm tracking-wider py-1 px-2 capitalize"),x(a,"background-color",s[0].categoryColor),v(n,"class","flex w-full -top-4 left-0 absolute justify-center"),v(l,"class","flex flex-col space-y-2 w-full min-h-[9.5em] p-5 target-word items-center justify-center tracking-wider leading-4"),v(_,"class","forbidden-words tracking-wider leading-4"),v(d,"class","flex flex-col"),v(t,"class","rounded-md border-2 relative"),x(t,"border-color",s[0].categoryColor),v(e,"slot","front"),v(e,"class","bg-white rounded-lg shadow-md p-4 py-6 shadow-slate-400 transform translate-x-0 select-none origin-bottom"),U(e,"pointer-events-none",!s[1]),x(e,"--tw-translate-x",s[4].x+"px"),x(e,"--tw-rotate",s[4].x/70+"deg")},m(h,L){$(h,e,L),u(e,t),u(t,n),u(n,a),u(a,o),u(t,f),u(t,d),u(d,l),u(l,i),c&&c.m(i,null),u(i,p),w&&w.m(i,null),u(l,k),I&&I.m(l,null),u(d,D),u(d,_);for(let V=0;V<S.length;V+=1)S[V]&&S[V].m(_,null);s[13](e),y||(g=[ot(jt.call(null,e,{delay:300})),K(e,"pandown",s[9]),K(e,"panup",s[7]),K(e,"panmove",s[8])],y=!0)},p(h,L){if(L&1&&r!==(r=h[0].category+"")&&Z(o,r),L&1&&x(a,"background-color",h[0].categoryColor),h[5].languages.german?c?c.p(h,L):(c=ze(h),c.c(),c.m(i,p)):c&&(c.d(1),c=null),h[5].languages.english?w?w.p(h,L):(w=Ye(h),w.c(),w.m(i,null)):w&&(w.d(1),w=null),h[5].languages.chinese?I?I.p(h,L):(I=qe(h),I.c(),I.m(l,null)):I&&(I.d(1),I=null),L&33){T=h[0].forbidden;let V;for(V=0;V<T.length;V+=1){const O=Ze(h,T,V);S[V]?S[V].p(O,L):(S[V]=Je(O),S[V].c(),S[V].m(_,null))}for(;V<S.length;V+=1)S[V].d(1);S.length=T.length}L&1&&x(t,"border-color",h[0].categoryColor),L&2&&U(e,"pointer-events-none",!h[1]),L&16&&x(e,"--tw-translate-x",h[4].x+"px"),L&16&&x(e,"--tw-rotate",h[4].x/70+"deg")},d(h){h&&m(e),c&&c.d(),w&&w.d(),I&&I.d(),ct(S,h),s[13](null),y=!1,we(g)}}}function Rt(s){let e;return{c(){e=C("div"),this.h()},l(t){e=E(t,"DIV",{slot:!0,class:!0}),b(e).forEach(m),this.h()},h(){v(e,"slot","back"),v(e,"class","rounded-lg shadow-md shadow-slate-400 back-card w-full h-full svelte-1exusos"),U(e,"pointer-events-none",s[1])},m(t,n){$(t,e,n)},p(t,n){n&2&&U(e,"pointer-events-none",t[1])},d(t){t&&m(e)}}}function Wt(s){let e,t,n,a,r,o,f=s[4].x<0?"Skip":s[4].x>0?"Fine":" ",d,l,i,p;function k(_){s[15](_)}let D={containerCardClass:"absolute top-2 left-2 right-2 h-fit",$$slots:{back:[Rt],front:[Ut]},$$scope:{ctx:s}};return s[1]!==void 0&&(D.isUp=s[1]),t=new xt({props:D}),s[14](t),ve.push(()=>lt(t,"isUp",k)),t.$on("tapCard",s[16]),{c(){e=C("div"),J(t.$$.fragment),a=A(),r=C("div"),o=C("span"),d=H(f),l=A(),i=C("div"),this.h()},l(_){e=E(_,"DIV",{class:!0});var y=b(e);Q(t.$$.fragment,y),a=N(y),r=E(y,"DIV",{class:!0});var g=b(r);o=E(g,"SPAN",{class:!0});var c=b(o);d=B(c,f),c.forEach(m),g.forEach(m),l=N(y),i=E(y,"DIV",{class:!0}),b(i).forEach(m),y.forEach(m),this.h()},h(){v(o,"class","whitespace-pre"),v(r,"class","absolute top-10 left-10 right-10 text-center p-1 rounded-full text-white text-xl opacity-0 pointer-events-none"),U(r,"bg-secondary-500",s[4].x<0),U(r,"bg-success-500",s[4].x>0),x(r,"opacity",(+(Math.abs(s[4].x)>ue)*Math.abs(s[4].x)-ue)/20),v(i,"class","bg-white rounded-lg shadow-sm p-4 pt-6 shadow-slate-500 transform translate-x-0 select-none origin-bottom absolute top-2 left-2 right-2 h-[440px] -z-10 back-card svelte-1exusos"),v(e,"class","p-2 grow relative")},m(_,y){$(_,e,y),ee(t,e,null),u(e,a),u(e,r),u(r,o),u(o,d),u(e,l),u(e,i),p=!0},p(_,[y]){const g={};y&4194359&&(g.$$scope={dirty:y,ctx:_}),!n&&y&2&&(n=!0,g.isUp=_[1],it(()=>n=!1)),t.$set(g),(!p||y&16)&&f!==(f=_[4].x<0?"Skip":_[4].x>0?"Fine":" ")&&Z(d,f),(!p||y&16)&&U(r,"bg-secondary-500",_[4].x<0),(!p||y&16)&&U(r,"bg-success-500",_[4].x>0),y&16&&x(r,"opacity",(+(Math.abs(_[4].x)>ue)*Math.abs(_[4].x)-ue)/20)},i(_){p||(R(t.$$.fragment,_),p=!0)},o(_){W(t.$$.fragment,_),p=!1},d(_){_&&m(e),s[14](null),te(t)}}}const ue=60;function Zt(s,e,t){let n,a,r;G(s,q,h=>t(12,n=h)),G(s,Se,h=>t(5,r=h));let{currentCard:o}=e;const f=_e(),d={start:{x:0,y:0}},l=Ht({x:0,y:0});G(s,l,h=>t(4,a=h));let i,p;function k(h){i.releasePointerCapture(h.detail.event.pointerId),Math.abs(a.x)>ue?(a.x<0&&f("answerSkipped",{}),a.x>0&&f("answerFine",{}),l.set({x:0,y:0},{hard:!0})):l.set({x:0,y:0})}function D(h){l.set({x:h.detail.event.x-d.start.x,y:h.detail.event.y-d.start.y})}function _(h){n.hasStarted&&(i.setPointerCapture(h.detail.event.pointerId),d.start={x:h.detail.event.x,y:h.detail.event.y})}async function y(){return p.flipFromBack()}async function g(){return p.flipToBack()}let c=!1;function w(h){ve[h?"unshift":"push"](()=>{i=h,t(2,i)})}function I(h){ve[h?"unshift":"push"](()=>{p=h,t(3,p)})}function T(h){c=h,t(1,c)}function S(h){Qe.call(this,s,h)}return s.$$set=h=>{"currentCard"in h&&t(0,o=h.currentCard)},s.$$.update=()=>{s.$$.dirty&4098&&c&&!n.hasStarted&&g()},[o,c,i,p,a,r,l,k,D,_,y,g,n,w,I,T,S]}class zt extends ie{constructor(e){super(),oe(this,e,Zt,Wt,pe,{currentCard:0,drawnNewCard:10,drawnNewCardClosed:11})}get drawnNewCard(){return this.$$.ctx[10]}get drawnNewCardClosed(){return this.$$.ctx[11]}}function Yt(s){let e,t,n,a,r,o,f,d;n=new Pt({});let l={currentCard:s[0]};return r=new zt({props:l}),s[11](r),r.$on("answerSkipped",s[3]),r.$on("answerFine",s[4]),r.$on("tapCard",s[5]),f=new Vt({}),f.$on("answerWrong",s[2]),f.$on("answerSkipped",s[3]),f.$on("answerFine",s[4]),{c(){e=C("div"),t=C("div"),J(n.$$.fragment),a=A(),J(r.$$.fragment),o=A(),J(f.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var p=b(e);t=E(p,"DIV",{class:!0});var k=b(t);Q(n.$$.fragment,k),a=N(k),Q(r.$$.fragment,k),o=N(k),Q(f.$$.fragment,k),k.forEach(m),p.forEach(m),this.h()},h(){v(t,"class","flex flex-col h-full w-full select-none"),v(e,"class","flex h-full mx-auto max-w-md justify-center items-center")},m(i,p){$(i,e,p),u(e,t),ee(n,t,null),u(t,a),ee(r,t,null),u(t,o),ee(f,t,null),d=!0},p(i,[p]){const k={};p&1&&(k.currentCard=i[0]),r.$set(k)},i(i){d||(R(n.$$.fragment,i),R(r.$$.fragment,i),R(f.$$.fragment,i),d=!0)},o(i){W(n.$$.fragment,i),W(r.$$.fragment,i),W(f.$$.fragment,i),d=!1},d(i){i&&m(e),te(n),s[11](null),te(r),te(f)}}}function qt(s,e,t){let n,a,r,o,f;G(s,q,S=>t(8,n=S)),G(s,Se,S=>t(9,a=S)),G(s,ge,S=>t(10,r=S)),G(s,Ee,S=>t(12,o=S)),G(s,mt,S=>t(13,f=S)),ht(!0);let d,l;D();function i(){n.hasStarted&&(Y(q,n.pointsEarned--,n),Y(q,n.pointsEarned=Math.max(n.pointsEarned,0),n),y())}function p(){n.hasStarted&&(Y(q,n.totalSeconds-=a.secondsPenaltyForSkip,n),n.totalSeconds<0&&Y(q,n.totalSeconds=0,n),y())}function k(){n.hasStarted&&(Y(q,n.pointsEarned++,n),y())}function D(){Y(ge,r=pt(f.filter(S=>!a.excludeCategories.includes(S.category))).map(gt),r),console.log(ge),console.log(a.excludeCategories.includes("animals")),t(0,d=r[0])}function _(){t(0,d=r[o.currentCardIndex]),Y(Ee,o.currentCardIndex+=1,o),o.currentCardIndex>=r.length&&(Y(Ee,o.currentCardIndex=0,o),D())}async function y(){l&&l.drawnNewCard(),_()}async function g(){l&&await l.drawnNewCardClosed(),_()}async function c(S){S.detail.type=="back"&&!n.hasStarted&&(await y(),Y(q,n=vt(n),n))}let w=a.excludeCategories,I=!1;ft(async()=>{setTimeout(()=>{t(7,I=!0)},10)});function T(S){ve[S?"unshift":"push"](()=>{l=S,t(1,l)})}return s.$$.update=()=>{s.$$.dirty&1600&&a.excludeCategories.join()!=w.join()&&(t(6,w=a.excludeCategories),Y(ge,r=r.filter(S=>!a.excludeCategories.includes(S.category)),r),_()),s.$$.dirty&384&&!n.hasStarted&&I&&g()},[d,l,i,p,k,c,w,I,n,a,r,T]}class Jt extends ie{constructor(e){super(),oe(this,e,qt,Yt,pe,{})}}export{Jt as component};
